<!DOCTYPE html>
<html lang="en">
	
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
		
		<link rel="stylesheet" href="main.css" />
		
		<title>Travel Experts</title>
		
		 <!-- Scripts for this page only -->
		<script>
			function confirmPress(action){
				var isOK = window.confirm("Are you sure you're ready to " + action + " this form?");
				if(isOK && action=='submit'){
					// when they want to submit the form, run various validation checks that HTML can't do
					// if any validation problems, warn the user and make isOK false so form is not submitted
					var messages =""
					
					// make sure there's either a first or last name
					var validation1 = document.getElementById('fname').value;
					var	validation2 = document.getElementById('lname').value;
					if((validation1 == null || validation1 == "") && (validation2 == null || validation2 == "")) {
						messages += "Please enter either a first name or a last name\n";
					}
					
					/* only use this if address is required
					// make sure they've selected a province
					validation1 = document.getElementById('prov').value;
					if(validation1 == ""){
						window.alert("Please select a province");
						isOK = false;
					} */

					// make sure the passwords match
					validation1 = document.getElementById('pw1').value;
					validation2 = document.getElementById('pw2').value;
					if(validation1 != validation2) {
						messages += "The passwords do not match, please enter your password again\n";
					}
					
					// display messages if there are any, and cancel form submission
					if (messages != ""){
						window.alert(messages);
						isOK = false;
					}

				}
				return isOK;
			}
			
		// @TODO: onblur to fix data formatting on phone number and postal code			
		</script>
		<style>
			aside {
				text-align: center;
			}
			aside > p{ 
				visibility: hidden;
				float: left;
				clear: left;
				margin: 0px;
				width: 90%;
				padding-left: 2%;
				padding-right: 2%;
				border: solid;
				border-width: 1px;
				background-color: rgba(255, 255, 255, 0.5);
			}
			fieldset{
				padding-left: 1%;
				padding-bottom: 1%;
				border-bottom: dotted;
				border-color: #dddddd;
				border-width: 1px;
				margin: 1%;
			}
			legend{
				position: relative;
				left: -1%;
			}			
			.formline{				
				vertical-align: center;
			}
			label{
				width: 12%;
				padding-right: 1%;
				text-align: right;
			}
			label.terms{
				width: 22%;
			}
			input{
				width: 18%;
				background-color: #fefefe;
				padding-left: 3px;
			}
			input#terms{
				width: 1%;
			}
			[required="required"]{	
				background-color: #ffe4e4;
			}

		</style>
	</head>
	
	<body>

		<header id="header row">
			<h1>
				<a><img
					src="media/logo1.png"
					title="our head office"
					alt="Travel Agency Logo"
					width="70"
					height="70"
				/></a>
				Welcome to Travel Experts
			</h1>
		</header>
		
		<nav class="topnav row">
			<a href="Exercise1.html">Home</a>
			<a href="contact.html">Contact Us</a>
			<a href="register.html">Create an Account</a>
			<a href="vacationPackages.html">Vacation Packages</a>
			<a href="http://hotels.com">Hotels</a> <br /><br />
		</nav>

		<main class="row">
			<aside class="col-2">
				<p id="fnamedesc">First name or given name. Either this or a last name is required.</p>
				<p id="lnamedesc">Last name or family name.  Either this or a first name is required.</p>
				<p id="unamedesc">User name: Anything that won't crash the database!</p>
				<p id="hphonedesc">Your home phone number - North American numbers only as in 555-555-5555</p>
				<p id="bphonedesc">Your work phone number - North American numbers only as in 555-555-5555 x5555</p>
				<p id="emaildesc">Your email address, in the format name@domain.com</p>
				<p id="addr1desc">Your street address</p>
				<p id="addr2desc">Any additional address information that might be needed</p>
				<p id="citydesc">The city where you live, within Canada</p>
				<p id="postaldesc">Your Canadian postal code, in the format A1A 1A1</p>
				<p id="pw1desc">Your password: [password requirements]</p>
				<p id="pw2desc">Confirm your password: it must match the one above</p>
			</aside>
			<section class="col-8">
				<article>
					<h2 class="artitle">Register for Service</h2>
					<form method="post" action="http://localhost/bouncer.php" target="_blank">
					<!-- @TODO: remove target="_blank" when action is our node.js code -->
						<fieldset>
							<legend>What to Call You:</legend>
							<div class="formline"><!-- @TODO: confirm whether both names are a business requirement -->
								<label for="fname">First Name:</label> 
								<input type="text" name="fname" id="fname" placeholder="Sam" onfocus="document.getElementById(this.id + 'desc').style.visibility = 'visible';" 
										onblur="document.getElementById(this.id + 'desc').style.visibility = 'hidden';" />
								<label for="lname">Last Name:</label> 
								<input type="text" name="lname" id="lname" placeholder="Doe" onfocus="document.getElementById(this.id + 'desc').style.visibility = 'visible';" 
										onblur="document.getElementById(this.id + 'desc').style.visibility = 'hidden';" />
							</div>
							<div class="formline">
								<label for="uname">Username:</label> 
								<input type="text" name="uname" id="uname" placeholder="SamDoe1234" required="required" 
										onfocus="document.getElementById(this.id + 'desc').style.visibility = 'visible';" 
										onblur="document.getElementById(this.id + 'desc').style.visibility = 'hidden';" />
								<!-- @TODO: future - make sure username isn't already taken -->
							</div>
						</fieldset>
						<fieldset>
							<legend>How to Contact You:</legend>
							<div class="formline"><!-- @TODO: server side, store all phone numbers in a consistent way. Note that work phone may have an extension. -->
								<label for="hphone">Home Phone:</label> 
								<input type="text" name="hphone" id="hphone" placeholder="587-555-5555" required="required" pattern="^1?\D*\d{3}\D*\d{3}\D*\d{4}$" 
										title="Please enter a valid North American phone number" onfocus="document.getElementById(this.id + 'desc').style.visibility = 'visible';" 
										onblur="document.getElementById(this.id + 'desc').style.visibility = 'hidden';" />
								<label for="bphone">Work Phone:</label> 
								<input type="text" name="bphone" id="bphone" placeholder="403-555-5555 x1234" pattern="^1?\D*\d{3}\D*\d{3}\D*\d{4}}( ?e?xt?\.? ?\d{0,5})?$" 
										title="Please enter a valid North American phone number" onfocus="document.getElementById(this.id + 'desc').style.visibility = 'visible';" 
										onblur="document.getElementById(this.id + 'desc').style.visibility = 'hidden';" />
							</div>
							<div class="formline">					
								<label for="email">Email:</label> 
								<input type="text" name="email" id="email" placeholder="sam.doe@email.com" required="required" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$" 
										title="Please enter a valid email address" onfocus="document.getElementById(this.id + 'desc').style.visibility = 'visible';" 
										onblur="document.getElementById(this.id + 'desc').style.visibility = 'hidden';" />
									<!-- email regexp pattern from W3Schools -->
							</div>
						</fieldset>
						<fieldset>
							<legend>Where You Are:</legend><!-- @TODO: should these be required? what does the business say? -->
							<div class="formline">	
								<label for="addr1">Street Address:</label> <input type="text" name="addr1" id="addr1" 
										onfocus="document.getElementById(this.id + 'desc').style.visibility = 'visible';" 
										onblur="document.getElementById(this.id + 'desc').style.visibility = 'hidden';" />
								<label for="addr2">Address Line 2:</label> <input type="text" name="addr2" id="addr2" 
										onfocus="document.getElementById(this.id + 'desc').style.visibility = 'visible';" 
										onblur="document.getElementById(this.id + 'desc').style.visibility = 'hidden';" />
							</div>
							<div class="formline">	
								<label for="city">City:</label> <input type="text" name="city" id="city" onfocus="document.getElementById(this.id + 'desc').style.visibility = 'visible';" 
										onblur="document.getElementById(this.id + 'desc').style.visibility = 'hidden';" />
								<label for="prov">Province:</label> <!-- @TODO: If required, Validate that they didn't leave it on "select a province" -->
								<select name="prov" id="prov">
									<option value="">Select a Province</option>
									<option value="AB">Alberta</option>
									<option value="BC">British Columbia</option>
									<option value="MB">Manitoba</option>
									<option value="NB">New Brunswick</option>
									<option value="NL">Newfoundland &amp; Labrador</option>
									<option value="NT">Northwest Territories</option>
									<option value="NS">Nova Scotia</option>
									<option value="NU">Nunavut</option>
									<option value="ON">Ontario</option>
									<option value="PE">Prince Edward Island</option>
									<option value="QC">Quebec</option>
									<option value="SK">Saskatchewan</option>
									<option value="YT">Yukon</option>
								</select>
								<label for="postal">Postal Code:</label> 
								<input type="text" name="postal" id="postal" placeholder="A1A 1A1" 
										pattern="^[abceghj-nprstvxyABCEGHJ-NPRSTVXY]\d[abceghj-nprstv-zABCEGHJ-NPRSTV-Z] ?\d[abceghj-nprstv-zABCEGHJ-NPRSTV-Z]\d$" 
										title="Please enter a valid Canadian postal code" onfocus="document.getElementById(this.id + 'desc').style.visibility = 'visible';" 
										onblur="document.getElementById(this.id + 'desc').style.visibility = 'hidden';" />
							</div>						
						</fieldset>
						<fieldset> <!-- @TODO: compare passwords, they must match. Any pattern requirements? -->
							<legend>Create a Password:</legend>
							<div class="formline">	
								<label for="pw1">Password:</label> 
								<input type="password" name="pw1" id="pw1" required="required" onfocus="document.getElementById(this.id + 'desc').style.visibility = 'visible';" 
										onblur="document.getElementById(this.id + 'desc').style.visibility = 'hidden';" />
							</div>
							<div class="formline">	
								<label for="pw2">Confirm Password:</label> 
								<input type="password" name="pw2" id="pw2" required="required" onfocus="document.getElementById(this.id + 'desc').style.visibility = 'visible';" 
										onblur="document.getElementById(this.id + 'desc').style.visibility = 'hidden';" />
							</div>
						</fieldset>
						<div class="formline">
							<label for="terms" class="terms">I agree to the terms and conditions:</label> 
							<input type="checkbox" id="terms" name="terms" value="y" required="required" />
						</div>
						<input type="submit" value="Create Account" onclick="return confirmPress('submit');" />
						<input type="reset" value="Reset Form" onclick="return confirmPress('reset');" />
					</form>
				</article>
			</section>
		</main>
		<footer class="row">
		  <p class="col-12">&copy; 2019 Travel Experts</p>
		</footer>
	</body>
</html>